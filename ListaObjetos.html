<!DOCTYPE html>
<head>
    <title>
        Pagina de CW full frontEnd
    </title>
    <meta charset='UTF-8'>
    <script src="BaseDeDatos.js"></script>
</head>
<body>
    <script>
        class cancion
        {
            id;
            nombre;
            artista;
            album;
            link;
            genero; 
            constructor(id, nombre, artista, album, link, genero)
            {
                this.id = id;
                this.nombre = nombre;
                this.artista = artista;
                this.album = album;
                this.link = link;
                this.genero = genero;
            }
        }

        function JSONToArray(json) 
        {
            const bd = new Array(); 
            for (let i = 0; i < json.length; i++) 
                bd.push(new cancion(json[i].id, json[i].nombre, json[i].artista, json[i].album, json[i].link, json[i].genero));
            return bd; 
        }

        var baseDatos = JSONToArray(baseDatosJSON);

    </script>
    <title>
        MusicETE
    </title>
    <h1>
        Buscador
    </h1>
    <input type='text' id='buscador' placeholder='Buscar Algo'/>
    <button id='botBuscar' onclick='busqueda()'>Buscar</button>
    <br>
    <div id='resultados'></div>

    <script>
        function busqueda()
        {
            var palabra = document.getElementById("buscador").value;
            var resultados = [];
            for (var i = 0; i < baseDatos.length; i++)
            {
                if (baseDatos[i].nombre.toLowerCase().includes(palabra.toLoweCase))
                {
                    resultados.push(baseDatos[i]);
                }
                else if (baseDatos[i].artista.toLowerCase().includes(palabra.toLowerCase()))
                {
                    resultados.push(baseDatos[i]);
                }
                else if (baseDatos[i].album.toLowerCase().includes(palabra.toLowerCase()))
                {
                    resultados.push(baseDatos[i]);
                }
            }
            document.getElementById("resultados").innerHTML= "";
            for (var i = 0; i < resultados.length; i++)
            {
                document.getElementById("resultados").innerHTML += "<p>" + resultados[i].nombre + "-" + resultados[i].artista;
                document.getElementById("resultados").innerHTML += "<button onclick='reproducir(" + resultados[i].id + ")'>Reproducir</button>" + "<p/>";
            }
        }
        function reproducir(id)
        {
            for (var i = 0; i < baseDatos.length; i++)
            {
                if (baseDatos[i].id == id)
                {
                    document.getElementById("resultados").innerHTML = "<iframe width='560' height='315' src='" + baseDatos[i].link + "' frameborder='0' allowfullscreen></iframe>";
                }
            }    
        }
    </script>
    
</body>